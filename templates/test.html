<html lang="en">
	<head>
		<title>Document Extraction Validation Test</title>
		<script src="{{ url_for('static', filename='scripts/test.js') }}"></script>
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/common.css') }}">
	</head>
	<body>

		<!-- Header Title -->
		<h1><img src="{{ url_for('static', filename='images/robospreader.png') }}">Document Extraction Validation Test</h1>

		<!-------------------------------- Intro -------------------------------->
		<article id="validation-test-1" class="card">
			<section class="container">
				<section class="category">
					<h2>{% block title %}Welcome{% endblock %}</h2>
					<p>Thank you for participating in this validation test!</p>
					<p>There are two distinct parts to this test:</p>
					<ol>
						<li>Manual Transcription</li>
						<li>Automatic Transcription</li>
					</ol>
					<p>In the Manual Transcription Test you will be required to copy numbers into the fields provided.</p>
					<p>In the Automatic Transcription Test you will validate that the fields contain correct numbers.</p>
					<br>
					<p>Click <strong>Next</strong> to continue.</p>
				</section>
			</section>

			<!-- Bottom row -->
			<footer class="solo">
				<button id="button-next" type="button" onclick="updatePageState(2)">Next</button>
			</footer>
		</article>

		<!-------------------------------- Manual Intro -------------------------------->
		<article id="validation-test-2" class="card" hidden="true">
			<form method="POST" enctype="multipart/form-data">

				<!-- Top row -->
				<section class="container">
					<section class="category">
						<h2>1. Manual Transcription Test</h2>
						<p>In this timed test you will be presented with a financial statement.</p>
						<p>Your task is to:</p>
						<ol>
							<li>Copy the values from all matching line items to their appropriate fields.</li>
							<li>Click Done when all the fields have been filled in.</li>
						</ol>
						<p>Click <strong>Start the Test</strong> when ready.</p>
					</section>
				</section>

			<!-- Bottom row -->
			<footer class="solo">
				<button id="button-next" type="button" onclick="updatePageState(3)">Start the Test</button>
			</footer>
			</form>
		</article>

		<!-------------------------------- Manual Test -------------------------------->
		<article id="validation-test-3" class="card" hidden="true">
			<form method="POST" enctype="multipart/form-data">

				<!-- Top row -->
				<section class="container">
					<section class="category">
						<h2>1. Manual Transcription Test</h2>
						<p>Your task is to:</p>
						<ol>
							<li>Copy the values from all matching line items to their appropriate fields.</li>
							<li>Click Done when all the fields have been filled in.</li>
						</ol>
					</section>
				</section>

				<!-- Content Row -->
				<section class="container">

					<!-- Financial Statement -->
					<section class="category threequarter">
						<row class="centered">
							<image src="{{ url_for('static', filename='images/test/financial-statement.png') }}" class="image-fit">
						</row>
					</section>

					<!-- Validation Fields -->
					<section class="category onequarter">
						<row class="centered">
							<section id="validation-content">
								{% for row in test1_data %}
								<row id="row-0" class="validation-row" data-index="row-0" data-label="Current assets">
									<span class='line-item-label test'>{{row["name"]}}</span>
									<input class="test" type="text" value="">
								</row>
								{% endfor %}
							</section>
						</row>
					</section>
				</section>

				<!-- Bottom row -->
				<footer class="solo">
					<button id="button-next" type="button" onclick="updatePageState(4)">Done</button>
				</footer>
			</form>
		</article>

		<!-------------------------------- Automatic Intro -------------------------------->
		<article id="validation-test-4" class="card" hidden="true">
			<form method="POST" enctype="multipart/form-data">

				<!-- Top row -->
				<section class="container">
					<section class="category">
						<h2>2. Automatic Transcription Test</h2>
						<p>
							In this timed test you will be presented with a set of images cropped from a financial statement, 
							and their automatically transcribed values.
						</p>
						<p>Your task is to:</p>
						<ol>
							<li>Compare the cell image to the transcribed value.</li>
							<li>If the values don't match, make corrections to the value in the text field.</li>
							<li>Click Done when all the fields have been validated.</li>
						</ol>
						<p>
							To help with validation, you can click any Play button to have the system read the values to you.
							<ol>
								<li>Click any Play button. The system will read the extracted values for each row out loud.</li>
								<li>Compare the spoken value with the cell image.</li>
								<li>To make corrections, click anywhere on the page. The system will stop reading at the current row.</li>
								<li>You can resume the reading comparison by clicking the Play button at any desired row.</li>
							</ol>
						</p>
						<p>Click <strong>Start the Test</strong> when ready.</p>
					</section>
				</section>

			<!-- Bottom row -->
			<footer class="solo">
				<button id="button-next" type="button" onclick="updatePageState(5)">Start the Test</button>
			</footer>
			</form>
		</article>
		
		<!-------------------------------- Automatic Test -------------------------------->
		<article id="validation-test-5" class="card" hidden="true">

				<!-- Top row -->
				<section class="container">
					<section class="category">
						<h2>2. Automatic Transcription Test</h2>
						<p>Your task is to:</p>
						<ol>
							<li>Compare the cell image to the transcribed value.</li>
							<li>Fix any values that don't match.</li>
							<li>Click Done when all the fields have been validated.</li>
						</ol>
						<p>
							If you would like the system to read the values to you, then click here: 
							<button class="image-button" onclick="playAudio({{test2_data[0]['id']}})"><img src="/static/images/speaker.png"></button>
						</p>
					</section>
				</section>

				<!-- Content Row -->
				<section class="container">

					<!-- Validation Fields -->
					<section class="category">
						<row class="centered">
							<section id="validation-content">
								{% for row in test2_data %}
								<row id="row-{{row['id']}}" class="validation-row" data-label="Current assets">
									<span class='line-item-label test'>{{row["name"]}}</span>
									<img id="cell-image-{{row['id']}}" src="/static/images/test/cell-image-{{row['id']}}.png" class="cell-image">
									<button id="btn-play" type="button" title="Play" onclick="playAudio({{row['id']}})" {{ "" if row["audio"] else "disabled" }}><img src="/static/images/speaker.png"></button>
									<audio id="audio-{{row['id']}}" autobuffer="autobuffer"><source src="{{row['audio']}}"/></audio>
									<input class="test" type="text" value="{{row['extracted_value']}}">
								</row>
								{% endfor %}
							</section>
						</row>
					</section>
				</section>

				<!-- Bottom row -->
				<footer class="solo">
					<button id="button-next" type="button" onclick="updatePageState(6)">Done</button>
				</footer>
		</article>

		<!-------------------------------- End -------------------------------->
		<article id="validation-test-6" class="card" hidden="true">
			<form method="POST" enctype="multipart/form-data">

				<!-- Top row -->
				<section class="container">
					<section class="category">
						<h2>All Done!</h2>
						<p>Thanks for taking the time to participate in this study! Your contribution is greatly appreciated.</p>
						<p>You can close this tab/window now.</p>
					</section>
				</section>

			</form>
		</article>

	</body>
</html>
